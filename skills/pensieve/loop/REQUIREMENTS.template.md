# Requirements 模板

**执行者**：主窗口

**用途**：长项目的锚点，防止走着走着忘了为什么出发。

**何时写**：
- 预估 6+ 个 tasks
- 跨多天执行
- 涉及多个模块联动

---

## 写作要求

- 在 `.claude/pensieve/loop/{date}-{slug}/requirements.md` 创建
- 先写初版，不要一开始就问问题
- 用户确认后，将路径记录到 `_context.md`

---

## 文档格式

```markdown
# 需求锚点

## 上下文引用

| 类型 | 路径 | 关键内容 |
|------|------|----------|
| decision | `decisions/xxx.md` | "引用原文" |
| maxim | `maxims/linus.md` | "好的品味" |
| 对话 | _context.md#需求澄清 | 用户说："..." |
| skill | `skills/xxx/SKILL.md` | 相关能力 |

## 核心问题

[一句话，我们要解决什么问题]

## 成功标准

- [ ] [可验证的完成条件 1]
- [ ] [可验证的完成条件 2]
- [ ] ...

## 边界

### 做什么
- [明确在范围内的事项]

### 不做什么
- [明确排除的事项，防止 scope creep]

## 约束

- [技术约束]
- [时间约束]
- [资源约束]
```

---

## 上下文记录

**必须记录到 `_context.md`**：
- 需求澄清过程中的关键对话
- 用户的原始表述 vs 最终理解
- 任何需求变更及原因

**示例**：
```markdown
## 关键对话

### 需求澄清 (2026-01-23)

用户原话："我想让多个终端能共享状态"

追问用户体验：
Q: 你期望的使用场景是什么？
A: 我在终端 A 开始了一个任务，想去终端 B 继续

Q: 需要两个终端同时处理不同的 task 吗？
A: 不需要，同一时刻只有一个在跑

Q: 最终你想看到什么？
A: 新开一个终端，能接着之前的进度继续

澄清后的用户体验：
- 用户在终端 A 开始 loop
- 用户可以关掉终端 A，在终端 B 继续
- 进度不丢失，从上次停止的地方继续
```

---

## 常见陷阱

| 陷阱 | 应对 |
|------|------|
| 需求太模糊 | 成功标准必须可验证 |
| 边界不清 | "不做什么"必须明确写出 |
| 忘记更新 | 需求变化时立即更新锚点 |
| 写成 PRD | 这是锚点不是文档，保持简短 |
